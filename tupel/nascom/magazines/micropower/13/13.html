<?php columnStart(1); ?>
<pre>
0CD0 30F9 0570 JR NC, LP1A ; LOOP IF NO CLOCK
0CD2 DB04 0580 IN A, (04) ; JUST CHECKING
0CD4 EEFF 0590 XOR &pound;FF
0CD6 1F 0600 RRA
0CD7 30F2 0610 JR NC, LP1A ; TRANSIENT, LOOK AGAIN
0620 ; **********************************************************
0CD9 0681 0630 LD B, &pound;81 ; USE &pound;3C FOR 2 Mhz
0640 ; **********************************************************
0CDB 10FE 0650 LP2 DJNZ LP2 ; DELAY AND WAIT
0CDD 00 0660 NOP ; BEFORE LOOKING
0CDE 00 0670 NOP FOR DATA PULSE
0CDF 00 0680
0690 ; ***********************************************************
0CE0 063D 0700 LD B, &pound;3D ; USE &pound;1D FOR 2 mHZ
0710 ; ***********************************************************
0CE2 00 0720 LP3 NOP ; IN SEARCH WINDOW
0CE3 DB04 0730 IN A, (04) ; READ PORT
0CE5 EEFF 0740 XOR &pound;FF ; INVERT IT
0CE7 1F 0750 RRA ; ROTATE TO CARRY
0CE8 3804 0760 JR C, GOT ; PULSE FOUND &ndash; CHECK
0CEA 10F6 0770 DJNZ LP3 ; NO PULSE, LOOK AGAIN
0CEC 181C 0780 JR NOGOT ; WINDOW EXPIRED
0CEE DB04 0790 GOT IN A, (4) ; CHECK AGAIN
0CF0 EEFF 0800 XOR &pound;FF
0CF2 1F 0810 RRA ; ROTATE TO CARRY
0CF3 3804 0820 JR C, GOTONE ; DEFINATELY A 1
0CF5 10EB 0830 DJNZ LP3 ; TRANSIENT &ndash; TRY AGAIN
0CF7 1811 0840 JR NOGOT ; STILL IN WINDOW?
0CF9 F1 0850 GOTONE POP AF ; RETORE REGS
0CFA 00 0860 END NOP ; TO END WINDOW
0CFB 00 0870 NOP ; USING NOP AS DELAY
0CFC 00 0880 NOP
0CFD 00 0890 NOP
0CFE 00 0900 NOP
0CFF 00 0910 NOP
0D00 00 0920 NOP
0D01 00 0930 NOP
0D02 10F6 0940 DJNZ END ; STILL IN WINDOW?
0D04 C1 0950 POP BC ; END &ndash; RESTORE REGS
0D05 07 0960 RLCA ; SHIFT ACCUMULATOR
0D06 CB87 0970 RES 0, A ; ZERO AND
0D08 3C 0980 INC A ; SET BIT 0 TO 1
0D09 C9 0990 RET ; RETURN
0D0A F1 1000 NOGOT POP AF ; NO DATA PULSE
0D0B C1 1010 POP BC ; RESTORE REGS.
0D0C 07 1020 RLCA
0D0D CB87 1030 RES 0, A ; SET BIT 0 TO 0
0D0F C9 1040 RET ; RETURN
1050 ;
1060 ; PROGRAM TO COMVERT TOKENS FROM TRS-80
1070 ; TO NASCOM. ALSO SETS UP POINTERS AND
1080 ; CORRECT LINE ADDRESS CODES BY SUB-
1090 ; TRACTING &pound;31EF (OR &pound;594C FOR DISC)
1100 ;
0D10 E5 1110 TOKEN PUSH HL
0D11 21FA10 1120 LD HL, &pound;10FA THROW AWAY SSSn
</pre>
<?php columnEnd(1); ?>
