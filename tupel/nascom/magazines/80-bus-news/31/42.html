<?php columnStart(1); ?>
<p>
Z2 ASSEMBLY LISTING &laquo;++eeee+ PAGE
</p>
<p>
1
</p>
<p>
OF35 j RERRMRIARARARRRARA AAA RRR
OF35 3* DISK UPDATE ROUTINE *
</p>
<p>
OF35 3
OF35 3*
</p>
<p>
mene ne ei ie sermon anne mmo HE
</p>
<p>
&amp;
</p>
<p>
OF35 3* M.J.R GIBBS 29-12-82 *
OF35 j ARRAAKARER RARER RIK
</p>
<p>
0018 NASSYS EQU #18
0028 PRS EQqU #28
0030 ROUT EQU #30
0030
</p>
<p>
0078 BLINK EQU #73
0068 B2HEX EQU #68
0065 CRT = EQU &laquo;#65
0063 INLIN EQU #63
0064 NUM EQU #64
0058 RETNAS EQU #58
0066 TBCD3 EQU #66
005D TDEL EQU #5D
o0sD
</p>
<p>
0080 ZDSIZE EQU #80
0081 ZDRD EQU #81
0082 ZDWR EQU #82
0083 ZRDIR EQU #83
0084 ZWDIR EQU #84
0085 ZCFS EQU #85
0087 ZENTER EQU 487
0088 ZCOV EQU #88
0089 ZCOVR EQU #89
008A ZCKER EQU #8A
0088 ZCBRK EQU #88
008c ZCRMA EQU #8C
0086 ZLOOK EQU #86
0063 ZINLIN EQU #63
0063
</p>
<p>
C055 SLFCB EQU #055
C069 S2FCB EQU #069
cool DDRV EQU C001
C414 NXTSEC EQU #C414
C414
</p>
<p>
C055 ORG
c055 LOAD
co55 FNAM DS
cos5p FEXT DS
coSsF FSFL DS
c060 FUFL DS
C061 FSEC DS
C063 FNSC DS
&pound;065 FLDA DS.
C067 FEXA DS
C067
</p>
<p>
C067
</p>
<p>
080A LINEL EQU #0804
0c29 CURSOR EQU #0029
</p>
<p>
9
&amp;
Fre
ad
wn
</p>
<p>
ODN ste ANN OF
</p>
<p>
;NASSYS COMMANDS
</p>
<p>
;DISK COMMANDS
</p>
<p>
;DISK SIZE
</p>
<p>
READ
</p>
<p>
s;WRITE
</p>
<p>
;READ DIRECTORY
</p>
<p>
sWRITE DIRECTORY
s;CONVET FILE SPECIFIER
sUPDATE DIRECTORY
;CALL OVERLAY
</p>
<p>
s;CALL OVERLAY RESTORE
;CHECK FOR ERRORS
;CHECK FOR BREAK
sABORT COMMAND MODE
3LOOKUP FILE DIRECTORY
sMONITOR INPUT LINE
;DISK LOCATIONS
</p>
<p>
;DIRECTORY DRIVE
;NEXT FREE SECTOR
;DUMMY FCB
</p>
<p>
3FILE NAME
;FILE EXTENSION
;SYSTEM FLAG
;USER FLAG
3SECTOR ADDRESS
;NUMBER SECTORS
;LOAD ADDRESS
;EXEC ADDRESS
3SCREEN ADDRESSES
</p>
<p>
Z2 ASSEMBLY LISTING &raquo;&laquo;.eeee. PAGE 2
</p>
<p>
OC21 NUMV EQU #0C21
000c CLEAR EQU #0C
000D cr EQqU = #0D
0018 ESC EqU o#IB
0018
</p>
<p>
0C80 ORG #0C80
0c80 LoaD #8000
0c80
</p>
<p>
0c80
</p>
<p>
0c80
</p>
<p>
0C80 CD230E UPDATE CALL HEAD
0C83 EF RST = PRS
0C84 44697368
</p>
<p>
0C88 20557064
</p>
<p>
OC8C 61746520
</p>
<p>
0C90 46696C65
</p>
<p>
0C94 204E616D
</p>
<p>
0C98 65202E2E
</p>
<p>
O0C9C 2E3A2D20
</p>
<p>
wom DISK UPDATE -=&mdash;
</p>
<p>
.
?
.
&raquo;
:
$
*
s
</p>
<p>
WRITE HEADINGS
</p>
<p>
OCAO 00 DB &ldquo;Disk Update File Name&nbsp;...:= &lsquo;,0
</p>
<p>
OCAL DF RST NASSYS
OCA2 63 DB ZINLIN
OCA3 211C800 LD HL, 28
OCA6 19 ADD HL,DE
OCA7 1155c0 LD DE, FNAM
OCAA 010800 LD BC,8
OCAD EDBO LDIR
</p>
<p>
OCAF EF RST = PRS
OCBO OD DB cR
QOCB1 46696C65
</p>
<p>
OCBS 20457874
</p>
<p>
OCB9 656E7369
</p>
<p>
OCBD 6F6E202E
</p>
<p>
OCC1 2R2E2E2E
</p>
<p>
OCC5 2R2E2E2E
</p>
<p>
OCC9 283A 2D20
</p>
<p>
sGET REPLY
</p>
<p>
sHL = A(START OF REPLY)
3;DE = A(S1FCB)
</p>
<p>
3LOAD NAME
</p>
<p>
occD 00 DB &ldquo;File Extension&nbsp;..cssceseet= 7,0
</p>
<p>
OCCE DF RST NASSYS
OCCR 63 DBs INLIN
ocnd 211C00 LD HL, 28
ocD3 19 ADD HL, DE
OcD4 115DC0 LD &laquo;ODE, FEXT
ocD7 010200 LD BC, 2
OCDA EDBO LDIR
</p>
<p>
OcDC EF RST PRS
OcpD oD DB ORR
OCDE 52414D20
</p>
<p>
OCE2 53746172
</p>
<p>
OCE6 74204164
</p>
<p>
OCEA 64726573
</p>
<p>
OCEE 73202E2E
</p>
<p>
OCF2 282E2E2E
</p>
<p>
OCF6 2E3A2D20 |
</p>
<p>
3HL = A(EXT)
3DE = A(FEXT)
</p>
<p>
sLOAD FEXT
</p>
<p>
42
</p>
<?php columnEnd(1); ?>
