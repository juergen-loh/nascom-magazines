<?php columnStart(1); ?>
<p>
Z2 ASSHMBLY LISTING&nbsp;........ PAGE 3
</p>
<p>
ODOD DF
</p>
<p>
ODOE 83
</p>
<p>
ODOF 2816
OD11 EF
</p>
<p>
opi2 opo94552
OD16 52475220
ODIA 54525920
ODIE 41474149
OD22 4800
ObD24 C3870C
Oda? 210004
OD2A 111FOR
OD2D 011400
OD30 EDBO
OD32 2118C4
OD35 22E50E
OD38 2AB30R
OD3B EDSB16C4
OD3F BT
</p>
<p>
OD40 ED52
OD42 19
</p>
<p>
0D43 CABO0C
OD46 1155C0
OD49 011400
OD4C EDBO
OD4E 22E50B
OD4E
</p>
<p>
OD4E
</p>
<p>
OD4E
</p>
<p>
OD51 O60D
0D53 DD21E90E
OD57 1470400
ODSA C5
</p>
<p>
OD5B O60A
ODS5D 21550
OD60 DDES
OD62 DDTEOO
OD65 BE
</p>
<p>
OD66 200A
OD68 Db23
OD6A 23
</p>
<p>
OD6B 10F5
OD6D DDE
ODEF C1
</p>
<p>
OD7O 18C6
OD72 DDE
oD74 DDI9
OD76 C1
</p>
<p>
ODTT 1081
OD79 CDDDOE
ODT CDDAOD
OD7F CDO1OR
OD82 210010
OD85 EDSB61C0
OD89 3A63C0
ODBC 47
</p>
<p>
ODBD 3ZA01CO
OD90 4F
</p>
<p>
STAZO
</p>
<p>
STA40
</p>
<p>
LOOP10
</p>
<p>
LOOP20
</p>
<p>
LOOP30
</p>
<p>
NEXT
</p>
<p>
STA50
</p>
<p>
RST
DB
JR
RST
</p>
<p>
DB
</p>
<p>
LD
LD
LD
LDIR
LD
</p>
<p>
LD
LD
OR
SBC
ADD
</p>
<p>
LD
LD
LDIR
LD
</p>
<p>
PUSH
LD
cP
</p>
<p>
INC
INC
DINZ
POP
POP
</p>
<p>
POP
ADD
POP
DING
CALL
CALL
CALL
LD
LD
LD
LD
LD
LD
</p>
<p>
NASSYS
</p>
<p>
ZRDIR ;READ DISK DIRECTORY
2, STA3O
</p>
<p>
PRS
</p>
<p>
CRET,TAB,&rsquo;ERROR TRY AGAIN&rsquo;,O
STA1O
HL,BUFFER ;COPY DISK ID
DE, NAME
BC, 20
</p>
<p>
;LOAD IT OUT
HL, DIR sHL = A(DIRECTORY)
(DIRPOS),HL ;SAVE It
HL, (DIRPOS) ;HL = POS IN DIR
DE,(ENDDIR) ;DE = A(END DIR)
A
HL, DE ;END OF FILES ON DISK
HL, DE ;RESTORE ADDRESS
Z, START ;YES NEXT DISK
DE, S1FCB ;COPY TO S1FCB
BC, 20 ;BC = L(FCB)
</p>
<p>
;ZAP IT ACROSS
(DIRPOS),HL ;KEEP DIR POSN
</p>
<p>
--- SCAN TABLE ---
B13 B= NO OF TABLE ENTRIES
IX, TABLE IX = A( TABLE)
</p>
<p>
DE, 10 DE = ENTRY SIZE
</p>
<p>
BC ;KEEP BC
</p>
<p>
B,10 ;B = SCAN LENGTH
HL,S1FCB ;HL = THIS FILE NAMB
</p>
<p>
IX ;KEEP IX,
</p>
<p>
A, (1X+0) ;GEBT FROM TABLE
</p>
<p>
(HL) ; COMPARE
</p>
<p>
NZ, NEXT ;PAIL
</p>
<p>
TX ;INDEX TO NEXT CHAR
HL
</p>
<p>
LOOP30 ;REPEAT
</p>
<p>
IX ;G0T If OK
</p>
<p>
BC ;RECOVER STACK
</p>
<p>
LOOPIO ; CONTINUE
</p>
<p>
Ix ;RESET POINTER
</p>
<p>
IX, DE ;POINT TO NEXT
</p>
<p>
BC ;RECOVER BC
</p>
<p>
LOOP20 ;TRY AGAIN
</p>
<p>
WAIT ;WAIT&nbsp;.5 SEC
</p>
<p>
HEAD ;PRINT HEADINGS
</p>
<p>
PRINT ;PRINT FILE INFo
</p>
<p>
HL, 21000 ;LOAD ADDRESS
</p>
<p>
DE,(FSEC) ;SECTOR ADDRESS
</p>
<p>
A, CFNSC) ;A = NUMBER OF SECTORS
B,A ;B = NUMBER OF SECTORS
A, (DDRV) ;A = DIRECTORY DRIVE
CA ;C = DIRECTORY DRIVE
</p>
<p>
en te em eR eR ome
</p>
<p>
22 ASSEMBLY LISTING&nbsp;...+...+ PAGE 4
</p>
<p>
ope1 DF RST NASSYS
opg2 81 DB ZDRD
</p>
<p>
OD93 -C2A70D op NZ, ERRORD
OD96 210010 LD HL, &pound;1000
ope9 220c0c LD (ARG1 ), HL
OD9C OFOO LD c,0
</p>
<p>
ODIE 09 ADD HL,BC
ODOF 22080 LD (ARG2), HL
ODA2 DF RST NASSYS
ODA3 57 DB &ldquo;wt
</p>
<p>
ODA4 C3380D JP LOOP1O
ODA4
</p>
<p>
ODA4
</p>
<p>
ODA4
</p>
<p>
ODAT F5 ERRORD PUSH AT
</p>
<p>
ODAS EF RST PRS
</p>
<p>
ODAQ OD094572
</p>
<p>
ODAD 726F7220
</p>
<p>
ODB1 3D3D3D3E
</p>
<p>
ODBS 2000 DB
ODB7 4 POP AF
ODBS DF RST WASSYS
ODB9 88 DB ZCOV
ODBA 456D7367 DB &ldquo;Emag&rdquo;
ODBE EF DSKEND RST PRS
ODBF 0D444953
</p>
<p>
ODC3 4B20492D
</p>
<p>
QDCT 4F204552
</p>
<p>
ODCB 524F5220
</p>
<p>
ODCF 53544F50
</p>
<p>
ODD3 50454420
</p>
<p>
ODD7 00 DB
ODDS DF RST WNASSYS
ODDO 5B DB RETNAS
opDg
</p>
<p>
ODDO
</p>
<p>
ODD9
</p>
<p>
ODDA EF HEAD RST PRS
</p>
<p>
ODDB ocoo DB CLEAR, 00
ODDD 21D40B LD
ODEO 222900 LD
ODES EF RST PRS
ODE4 54415045
</p>
<p>
ODES 20424143
</p>
<p>
ODEC 48555020
</p>
<p>
ODFO 46475220
</p>
<p>
ODF4 444953438
</p>
<p>
ODF8 5300 DB
ODFA 210A08 LD
ODFD 22290 LD
OEBOO C9 RE?
OOO
</p>
<p>
OEOO
</p>
<p>
OBOO
</p>
<p>
OEO1 3E0C PRINT LD A, CLEAR
O03 DF RST NASSYS
OEO4 6F \ DB souT
ORO5 CDDDOE CALL WATT
</p>
<p>
HL, LINE
</p>
<p>
HL, TOPLN+10
(CURSOR) , HL
</p>
<p>
(CURSOR), HL
</p>
<p>
s;READ IT IN
; ERROR
</p>
<p>
;SET UP FOR WRITE
</p>
<p>
;CALC END ADD
</p>
<p>
;RETURN
</p>
<p>
y--- DISK ERROR ---
}
;
</p>
<p>
KEEP ERROR NUMBER
</p>
<p>
CRET, TAB, &ldquo;Error ===&gt; &ldquo;,00
</p>
<p>
sLOAD ERROR OVERLAY
;PRINT MESSAGE
</p>
<p>
CRET, DISK I-O ERROR STOPPED &lsquo;,00
</p>
<p>
--- SUBROUTINE HEAD ---
</p>
<p>
om em oe
</p>
<p>
;SETUP CURSOR POSN
;SET IT UP
</p>
<p>
&lsquo;PAPE BACKUP FOR DISKS&rsquo;,0O
</p>
<p>
;RESET FOR NORMAL PRINT
</p>
<p>
&laquo;= SUBROUTINE PRINT +--
</p>
<p>
te an en
</p>
<p>
sWAIT&nbsp;.5 SEC
</p>
<?php columnEnd(1); ?>
