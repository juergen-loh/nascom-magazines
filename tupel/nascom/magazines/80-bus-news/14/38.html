<?php columnStart(1); ?>
<p>
DRIVE ROUTINES FOR THE GEMINI GM822 RTC MODULE
</p>
<p>
0157
Osa&rsquo;
o1se&rdquo;
O15E&rdquo;
0160&rdquo;
0162&rsquo;
0163&rsquo;
0166&rsquo;
0167&rsquo;
0168&rdquo;
0169&rdquo;
O16B&rsquo;
</p>
<p>
o16c&rsquo;
o16r&rsquo;
0172&rdquo;
</p>
<p>
o175&rsquo;
0178&rdquo;
017B&rsquo;
o17D&rsquo;
O78&rdquo;
0181&rdquo;
0182&rdquo;
0185&rdquo;
0188&rdquo;
</p>
<p>
018A&rdquo;
018D&rsquo;
O18F&rsquo;
0192&rdquo;
0194&rdquo;
0196&rdquo;
0197&rdquo;
019A&rsquo;
O19B&rsquo;
0198&rdquo;
OTAt
</p>
<p>
O1A3&rdquo;
O1A6&rsquo;
o1A9&rdquo;
O1AB&rsquo;
OAD!
01B0&rdquo;
01B2&rsquo;
O1B4&rdquo;
o1B6&rsquo;
o1B7&rdquo;
</p>
<p>
21
06
16
1E
OF
TE
cD
23
15
iD
10
cg
</p>
<p>
cD
cD
cD
</p>
<p>
ai
oD
16
5F
2i
19
14
oO
ED
</p>
<p>
BA
D6
ep
D6
16
5F
2i
19
44
o1
ED
</p>
<p>
21
</p>
<p>
&ldquo;4
</p>
<p>
ED
ED
14
</p>
<p>
3B
ED
ED
13
3D
</p>
<p>
0288&rdquo;
oC
EF
4F
1D
</p>
<p>
otai&rsquo;
</p>
<p>
Pv
</p>
<p>
ooFO&rsquo;
OOF9&rsquo;
O28&rdquo;
</p>
<p>
02BB&rsquo;
OID&rdquo;
00
</p>
<p>
M-80
</p>
<p>
LD HL, WRESPC
LD B,12
LD D, INSTAT+NOSTRB
LD E, INSTAT+WRSTRB
LD C, PADDR
WRRTCL: LD A, (AL)
CALL WRITE
INC HL
DEC D
DEC B
DINZ WRRICL
RET
</p>
<p>
*e** Display the current date
wee formi-
</p>
<p>
on te ee om
</p>
<p>
TIME: CALL
. CALL
CALL
3; Get the month
LD HL, WSPACE
CALL PLSTRG
LD D,O
LD E,A
LD HL, MNSTRG
ADD HL, DE
LD DE, MONTH
LD BC,3
LDIR
3; Get the day of the week
LD A, (WSPACE+2)
SUB 30H
CALL TIMES
SUB 3
LD D,O
LD EA
LD HL, DYSTRG
ADD HL, DE
LD DE, DAYMN
LD BC,3
LDIR
3; Get the date and time&nbsp;.
LD HL, WSPACE+3
LD DE, DAY
LDI
LDI
LD DE, HOURS
LD A,3
LDI
LDI
INC DE
DEC A
</p>
<p>
INDATA
INADDR
RDRTC
</p>
<p>
HMS +
</p>
<p>
19:00:56.6 Mon 21 Sep 1982
JE HEHEHE SETHE EE HEME HEHEHE HEHE
</p>
<p>
14 Sep 1982 14:48 PAGE 1-4
Write from here
</p>
<p>
12 registers to write
</p>
<p>
Interrupt atatus + no strobe
Interrupt statue + write strobe
8 = control port address
</p>
<p>
Get the data
</p>
<p>
Put in the RTC
</p>
<p>
AR an OR a ek a On
</p>
<p>
Next RTC register
</p>
<p>
Loop if more
Done
</p>
<p>
on ee
</p>
<p>
and time in the *#+*
ee
</p>
<p>
Set PIOs to RESET state
</p>
<p>
o-
</p>
<p>
-
</p>
<p>
Get data into workspace
</p>
<p>
Point to output string
Calculate offset
</p>
<p>
on ae
</p>
<p>
Add it to &lt;HL&gt;
</p>
<p>
-
</p>
<p>
Copy across
</p>
<p>
on
</p>
<p>
Get day number
</p>
<p>
-
</p>
<p>
Place in atring
</p>
<p>
on
</p>
<p>
Calculate offset
</p>
<p>
on
</p>
<p>
Add it to &lt;HL&gt;
</p>
<p>
-
</p>
<p>
Copy across
</p>
<p>
Now the day
</p>
<p>
-
</p>
<p>
ony
</p>
<p>
Now the hours/mins/secs
</p>
<p>
More?
</p>
<p>
-
</p>
<p>
DRIVE ROUTINES FOR THE GEMINI GM822
</p>
<p>
oO1B8&rsquo;
O1BA*
o1Be&rsquo;
O1BF
o1c2&rsquo;
</p>
<p>
o1c3&rsquo;
o1c4&rsquo;
orcs&rdquo;
o1c6&rsquo;
o1c7&rsquo;
otce&rsquo;
o1egt
o1cBt
O1cE
o1cF&rsquo;
</p>
<p>
opi!
ope&rdquo;
o1D3&rsquo;
o1D5&rsquo;
o1p8&rsquo;
o1D9&rsquo;
OmDA&rsquo;
o1De&rsquo;
o1DD&rsquo;
O10&rdquo;
O1H2&rsquo;
</p>
<p>
O1E3&rsquo;
O1n4&rsquo;
O1B5&rsquo;
O1E6&rsquo;
O1BT&rsquo;
O18&rdquo;
</p>
<p>
0159&rdquo;
O1BA&rsquo;
O1EB&rsquo;
O1EC&rsquo;
</p>
<p>
20
ED
ai
cD
cg
</p>
<p>
TE
BT
cs
23
5F
B5
OE
cD
BA
18
</p>
<p>
O7
</p>
<p>
OT
OT
80
cg
</p>
<p>
AT
OT
80
cg
</p>
<p>
Fs
AO
0090&rdquo;
o1c3&rdquo;
</p>
<p>
02
0005
</p>
<p>
30
O1n3&rsquo;
30
</p>
<p>
o1gg&rsquo;
03
</p>
<p>
; Print
</p>
<p>
PRINT:
</p>
<p>
*
</p>
<p>
RHE
</p>
<p>
PLSTRG +
</p>
<p>
RHEE
</p>
<p>
es
</p>
<p>
TIME10O:
</p>
<p>
TIMES:
</p>
<p>
3
Y8
</p>
<p>
oR
LDI
LD
CALL
RET
</p>
<p>
RIC MODULE
</p>
<p>
NZ, HMS
</p>
<p>
HL, HOURS
</p>
<p>
PRINT
</p>
<p>
the string
</p>
<p>
LD
OR
RET
INC
LD
PUSH
LD
CALL
POP
JR
</p>
<p>
LD
INC
SUB
CALL
LD
LD
SUB
ADD
CALL
SUB
RET
</p>
<p>
HREERER
</p>
<p>
RLCA
LD
RLCA
RLCA
ADD
RET
</p>
<p>
LD
RLCA
ADD
RET
</p>
<p>
A, (HL)
A
</p>
<p>
Z
</p>
<p>
HL
ELA
HL
</p>
<p>
M--80
</p>
<p>
on on am
</p>
<p>
an ee
</p>
<p>
ro
</p>
<p>
c, Conour
</p>
<p>
BDOS
HL
PRINT
</p>
<p>
Get place in string
</p>
<p>
A, (HL)
HL
30H
TIMEIO
BA
</p>
<p>
A, (HL)
30H
A,B
TIMES
3
</p>
<p>
BA
</p>
<p>
A,B
</p>
<p>
B,A
</p>
<p>
A,B
</p>
<p>
HER
</p>
<p>
ae am em em em
</p>
<p>
ane ee
</p>
<p>
14 Sep 1982 14:48 PAGE 1-5
Yes, so loop
Copy across the tenths
</p>
<p>
Now display it
Done
</p>
<p>
Get the byte
Done?
</p>
<p>
Save &lt;HL&gt;
</p>
<p>
SHEE
</p>
<p>
JE CHIH HEI IHE HEHEHE BE IEE IHR III
Multiplication routines
</p>
<p>
SEE
</p>
<p>
HEE HEERREREI
</p>
<p>
Multiply by 2
Save the partial product
Multiply by 2 again
+. and again
Add the partial product
</p>
<p>
Save the partial product
Multiply by 2
Add the partial product
</p>
<?php columnEnd(1); ?>
