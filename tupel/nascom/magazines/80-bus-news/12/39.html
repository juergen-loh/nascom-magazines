<?php columnStart(1); ?>
<p>
us Ne SS NE SE
</p>
<p>
me
</p>
<p>
D1:
</p>
<p>
D2:
</p>
<p>
PolyDos 2.0 DUMP utility
</p>
<p>
by Anders Hejlsberg, June 1982
</p>
<p>
REFS
REF
</p>
<p>
ORG
IDNT
</p>
<p>
LD
LD
LD
SCAL
SCAL
LD
SCAL
SCAL
SET
SET
SCAL
SCAL
LD
SCAL
CALL
LD
LD
LD
LD
OR
JP
DEC
LD
PUSH
PUSH
LD
LD
LD
LD
LD
SCAL
SCAL
INC
LD
POP
POP
PUSH
PUSH
LD
LD
OR
JR
LD
LD
INC
OR
JR
RST
DB
DB
</p>
<p>
SYSEQU
</p>
<p>
1000H
$,$
</p>
<p>
B,110B
</p>
<p>
DE, (CLINP)
HL,FCB
ZCFS
</p>
<p>
ZCKER
(CLINP) ,DE
ZRDIR
ZCKER
</p>
<p>
4,B
</p>
<p>
5,B
</p>
<p>
ZLOOK
ZCKER
</p>
<p>
HL, POUTT
ZNOM
</p>
<p>
TOPPG
</p>
<p>
DE,0
</p>
<p>
C,E
</p>
<p>
HL, (FCB+FNSC)
A,H
</p>
<p>
L
</p>
<p>
z,D11
</p>
<p>
HL
(FCB+FNSC) ,HL
DE
</p>
<p>
BC
</p>
<p>
HL, BUFFER
DE, (FCB+FSEC)
A, (DDRV)
C,A
</p>
<p>
B,l
</p>
<p>
ZDRD
</p>
<p>
ZCKER
</p>
<p>
DE
(FCB+FSEC) ,DE
BC
</p>
<p>
DE
</p>
<p>
HL
</p>
<p>
DE
</p>
<p>
HL, (CLINP)
A, (HL)
</p>
<p>
A
</p>
<p>
Z,D5
HL,PLCT
</p>
<p>
A, (HL)
</p>
<p>
HL
</p>
<p>
(HL)
</p>
<p>
NZ,D5
</p>
<p>
PRS
</p>
<p>
&lsquo;DUMP V1.0&rsquo;
TAB,0
</p>
<p>
eee ee eee cee nee meer es Sn sh ee hm tS ee ey tr Sem sh ene ts ry Ar ml a mem ih, ey
</p>
<p>
;Get symbols from SYSEQU
7Get all of them
</p>
<p>
;Define program origin and
;load/execute addresses
</p>
<p>
:Type and drive optional
;Pick up command line ptr
:Point to FCB
</p>
<p>
;Convert file name
</p>
<p>
;Check for error
</p>
<p>
;Save new command line ptr
Read directory
</p>
<p>
;Check for error
</p>
<p>
:Copy dir info to FCB
sInclude locked files
;Look up file
</p>
<p>
;Check for error
</p>
<p>
7Point to output table
sActivate printer
</p>
<p>
:Move to top of form
sInit dump address
</p>
<p>
:Init page number
</p>
<p>
3;Get sector counter
</p>
<p>
; Zero?
</p>
<p>
7Yes =&gt; done
;Decrement
</p>
<p>
:Save it
</p>
<p>
;Save dump address
;Save page number
sPoint to RAM buffer
3Get sector address
:Read from dir drive
</p>
<p>
;One sector
</p>
<p>
3Go read
</p>
<p>
sCheck for error
Point to next sector
+Save address
;Restore page number
:Restore dump address
;Save buffer pointer
;Save dump address
:Point to heading
sLoad first character
;Empty?
</p>
<p>
7Yes =&gt; skip
</p>
<p>
;Point to PLCT
</p>
<p>
tLoad it
</p>
<p>
Point to PPOS
</p>
<p>
:Zero if PLCT=PPOS=0
;Not at top of form =&gt; skip
Print DUMP message
</p>
<?php columnEnd(1); ?>
