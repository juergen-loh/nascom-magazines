<?php columnStartJustify(2, 2); ?>

<p>
behandelt:
</p>
<p>
Carry = 1 wenn Fehler sonst 0
</p>
<p>
bei Fehler A=Fehlernummer (fuer Pheas stehen
die Fehlernummern 10-1F zur Verfuegung).
</p>
<p>
Der Bootstap-Loader liest aus den ersten Sektoren der Diskette das DOS
in den dafuer vorgesehenen Speicherbereich. Moeglicherweise wird auch
NASSYS mitgeladen (sh. beiliegenden Sourcecode).
</p>
<h4>
Das Formatierungs-Programm
</h4>
<p>
Die Diskette wird initialisiert, die
Sektoren des Inhaltsverzeichnisses muessen mit 0E5H
auf&shy;ge&shy;fuellt werden.
</p>
<h4>
Anpassung BASIC :
</h4>
<p>
Nach dem Initialisieren des Basic ist in die Adresse 1055h-56h anstelle
von FF40h die Adresse BASCAL (sh. Maschinensprache-Schnittstelle)
einzutragen. Vor der Initialisierung des Basics kann BASCAL auch an die
Adresse E335 eingetragen werden (bei BASIC im RAM sinnvoll).
</p>
<h4>
Anpassung anderer Software:
</h4>
<p>
Die Moeglichkeiten, das DOS von
Maschinensprache aus aufzurufen sind gesondert beschrieben.
</p>
<h4>
Hardware Aenderungen:
</h4>
<p>
Neben dem Anschluss des Controllers wird eine kleine Schaltung zur
Ausblendung des Monitor-Roms benoetigt. (Über diese Möglichkeiten
können Sie einiges in <a href="../../../06/01/text/#head">Heft 6</a> nachlesen)&nbsp;.
</p>
<h4>
Fuer EMDOS :
</h4>
<p>
Boot-Eprom &ndash;&gt; Monitor Sockel
</p>
<p>
Ausblendung des Boot-Eproms und
ersetzen durch RAM
entweder statisch oder 4k Page der dynamischen RAM-Karte
</p>
<h4>
Fuer CP/M :
</h4>
<p>
Ersetzen der gesamten unteren 4k Page 0h-
1000h durch RAM
</p>
<p>
Bei Bildschirmzugriffen wird kurzzeitig zurueckgeschaltet.
</p>
<h4>
EMDOS Speicherbelegung:
</h4>
<p>
D000-D100 &nbsp; Puffer frei, solange DOS nicht
aktiv
</p>
<p>
D100 &nbsp; Einsprungpunkt von NASSYS aus<br>
</p>
<p style="text-align: left">
D103 &nbsp; Einsprungpunkt fuer DOS-Aufrufe (sh.

<?php columnChangeJustify(2, "</p>", "<p>"); ?>

EMDOS.MAC)
</p>
<p>
D106 NASSYS-PHEAS-Aufrufe<br>
E D109 A&nbsp;; HL; DE Register entsprechend
ARG2-ARG4 versorgen und Aufruf von PHEAS (zum Test von PHEAS und zum
direkten Sektorzugriff.)<br>
</p>
<p>
D109 BASCAL Einsprungpunkt von BASIC<br>
</p>
<p>
D10C Sprung zu PHEAS
</p>

<br>

<p>
PHEAS DIENT ZUM LESEN UND SCHREIBEN DER EINZELNEN SEKTOREN
</p>
<p>
ENTSPRECHEND SEKTORNUMMER. DIE DISKETTE BESTEHT AUS VIELEN 256-BYTES
LANGEN LOGISCHEN SEKTOREN. DIE GRUPPENGROESSE UMFASST 4 SEK&shy;TO&shy;REN. BEI
CP/M KOMPATIEBLEN DISKETTENFORMATEN MUSS DER SKEW FAKTOR BERUECKSCHTIGT
WERDEN&nbsp;!
</p>
<h4>
PHEAS AUFRUFE :
</h4>
<p>
A= AUFRUFSNUMMER
</p>
<p>
A=0 &nbsp; INIT PHEAS (NACH LADEN AUFGERUFEN)
</p>
<p>
A=1 ABORT PHEAS (INTERRUPT
LOESCHEN, SODASS PHEAS GELOESCHT WERDEN KANN)
</p>
<p>
A=2 &nbsp; SELECT DISK (C=DISKNO.; HL WIRD ADRESSE DSB
</p>
<p>
A=3 &nbsp; SEKTOR LESEN; HL SEKTORNUMMER ;BIT 15 = 1 : RELATIV DE ADRESSE
DATEN
</p>
<p>
A=4 &nbsp; SEKTOR SCHREIBEN<br>
HL SEKTORNUMMER<br>
DE SPEICHERADRESSE
</p>
<h4>
DSB &nbsp; DISKETTEN STEUER BLOCK
</h4>
<p>
FUER JEDEN LAUFWERKSTYP EINEN, FORMAT S.H.
UNTEN
</p>
<?php imageinsert($imagepath, $year, $issue, $page, "Image-20-1.jpeg"); ?>

<?php columnEnd(2); ?>
