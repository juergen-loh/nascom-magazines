<?php columnStart(1); ?>
<p class="continued">
supplied for this. This prevents BASIC from overwriting TOS&rsquo;s workspace when
cold-started. TOS overlays ROM ZEAP, but it is a simple matter to install a
switch in the 4K decode line (on the N2) to switch between the two. I of course
encountered difficulty in this task owing to Blocks A &amp; B on the N2 card being in
different places to that documented (i.e. for block A read block B, and vice
versa).
</p>
<p>
The TOS command structure is fairly extensive, with commands being
entered in the true NAS&shy;SYS fashion, i.e. a single command letter followed by a
number of arguments. In TOS these arguments are obligatory and are summarised
below.
</p>
<table class="indent">
<!--colgroup><col style="width: 3em"><col></colgroup-->
<tr><td>B d</td><td>Save BASIC file on drive d</td></tr>
<tr><td>C d</td><td>Display catalogue of drive d</td></tr>
<tr><td>D d nn</td><td>Delete file number nn from drive d</td></tr>
<tr><td>I</td><td>Initialise a blank tape in drive A</td></tr>
<tr><td>J</td><td>BASIC cold start</td></tr>
<tr><td>N</td><td>NAS&shy;SYS cold start</td></tr>
<tr><td>P d</td><td>Save NASPEN file on drive d</td></tr>
<tr><td>Q</td><td>NASPEN warm start</td></tr>
<tr><td>R</td><td>Rewind both tapes, read in catalogues</td></tr>
<tr><td>R d nn</td><td>Read file nn from drive d</td></tr>
<tr><td>T d ssss</td><td>Transfer file nn from drive d to the other drive</td></tr>
<tr><td>W d ssss eeee</td><td>Write file from &pound;ssss to &pound;eeee-1 to drive d</td></tr>
<tr><td>X</td><td>Rewind both tapes prior to removal</td></tr>
<tr><td>Z</td><td>BASIC warm start</td></tr>
</table>
<p>
I understand that the latest version of TOS has a multiple-delete
command, which presumably is of the form D d nn xx yy &hellip; which would delete file
numbers nn, xx, yy, etc. from the tape in drive d. I have made alterations to TOS
to include the following (extra) commands:
</p>
<table class="indent">
<colgroup><col style="width: 3em"><col><col></colgroup>
<tr><td>E xxxx</td><td>&ndash;</td><td>Execute program at address xxxx. Additional arguments
					may be supplied, as with the NAS&shy;SYS &lsquo;E&rsquo; command.</td></tr>
<tr><td>R d</td><td>&ndash;</td><td>Rewind the tape &amp; read the catalogue of the specified
					drive (TOS only does this for both drives at once).</td></tr>
<tr><td>X d</td><td>&ndash;</td><td>Rewind the specified tape to the start prior to removal.</td></tr>
<tr><td>Y</td><td>&ndash;</td><td>BASIC warm start.</td></tr>
<tr><td>Z d</td><td>&ndash;</td><td>Save ZEAP file on the specified drive.</td></tr>
</table>
<p>
When saving a file, TOS prompts for a filename, which may be upto 17
characters long. This gives ample room for, say, the version number and, in the
case of machine code files, the execution address. With the Write command TOS
also prompts for a single-character filetype (BASIC &amp; NASPEN default to B and P
respectively). No check is made to see if there is already a file of the name you
have specified. Each file is assigned a file number, and this number is used to
access the file. This reduces the chance of typing errors, which is quite
possible if one had to type in 17-character filenames each time. It does mean,
however, that when loading a file under program control (i.e. from another
program, e.g. loading a data file into RAM) that the file number be specified.
While (short) routines are given in the manual for saving a (named) file &amp;
loading a (numbered) file under program control, no routine is given for loading
a named file. When you consider that the Delete command can cause the assigned
filenumbers to change, this is a serious drawback. No source listing is supplied,
but having disassembled the software, writing such a routine shouldn&rsquo;t be too
difficult.
</p>
<p>
There were a couple of bugs in TOS, which interfere with the operation of
the &lsquo;I&rsquo; command, in which the blank catalogue written to the tape isn&rsquo;t really
blank. If any other reader has found this problem, there are a couple of bytes to
</p>
<?php columnEnd(1); ?>
