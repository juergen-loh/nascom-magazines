<?php columnStart(1); ?>
<p>
OO6F
006c
0037
0034
0034
0034
8000
8000
8000
8000
8002
8002
8002
8002
8004
8005
8007
8008
8009
800C
800D
800F
8011
8013
8014
8017
8018
801A
801D
8021
8022
8023
8025
8027
8028
802A
802B
802C
80 2F
8030
8032
8033
</p>
<p>
j NAA RRAR RRA KA AK KARE RAK RARER RAR ARR EIKRRK RRR
3% cuTs8000 *
3% A program to provide output from the *
ys Sinclair Spectrum in NAS-SYS tape *
5% format at 1200 Baud. *
3% M D Hendry *
3% edited 10th Oct 1984 *
[FRI IOI TOR IOI ICR FOR FR III ROR ROR TR IR IO TORR IIR HK Re
</p>
<p>
s;Delay loop values for tone generation
</p>
<p>
;practical values/calculated values
DELI EQU 111 3110.64
DEL2 EQU 108 3108.03
DEL3 EQU 55 354.55
DEL4 EQU 52 351.94
</p>
<p>
ORG 8000H
LOAD E&para;
</p>
<p>
ARGI DS 2 ;POKE start address here
ARG2 DS 2 ;POKE end address + 1 here
</p>
<p>
;Execute here
</p>
<p>
DI ;stemporarily stop keyboard interrupt
</p>
<p>
LD BOO
PLO PUSH BC
SCP ;set flag for high bit
CALL SndBitc
POP BC
DINZ PLO ;send 256 high bits
LD BO j;set up counter
LD LO j;set up output register
PLI PUSH BC
CALL BytOut
POP BC
DJINZ PLL
LD HL (ARGI) j;adapted from NAS-SYS
PLIA LD DE (ARG2)
EX DE AL
SCF
SBC HL DE
JR C Finish
EX DE HL
LD BO
PL2 PUSH BC
SCF
CALL SndBit
POP BC
DINZ PL2
XOR A
LD BOS
</p>
<p>
soutput 256 nulls
</p>
<p>
CD7380 = PL3
3EFF
</p>
<p>
10F9
</p>
<p>
AF
</p>
<p>
BA
</p>
<p>
2002
</p>
<p>
43
</p>
<p>
04
</p>
<p>
58 PL4
7D
</p>
<p>
CD7380
</p>
<p>
7C
</p>
<p>
CD7380
</p>
<p>
7B
</p>
<p>
CD7380
</p>
<p>
TA
</p>
<p>
CD7380
</p>
<p>
7c
</p>
<p>
7E PL5
</p>
<p>
TE
</p>
<p>
cD7380
</p>
<p>
23
</p>
<p>
10F6
</p>
<p>
060B
</p>
<p>
79
</p>
<p>
CD7380 PL6
AF
</p>
<p>
LOFA
</p>
<p>
18AC
</p>
<p>
FB Finish
</p>
<p>
co
</p>
<p>
ES B0Call
</p>
<p>
cs
6F
cd7c80
cl
El
i)
</p>
<p>
AF BytOut
</p>
<p>
cD9080
</p>
<p>
0608
</p>
<p>
c5 BOL
CB3D
</p>
<p>
CALL BOCall
LD A OFFH
DJINZ PL3
XOR A
</p>
<p>
CP D
</p>
<p>
JR NZ PL4
LD BE
</p>
<p>
INC B
</p>
<p>
LD E B
</p>
<p>
LDA L
CALL BOCall
LD A H
CALL 80Call
LDA E
CALL BOCall
LD A D
CALL BOCal1
</p>
<p>
CALL BOCall
INC HL
</p>
<p>
DINZ PL5
</p>
<p>
LD B OBH
LDA C
CALL BOCalL
XOR A
</p>
<p>
DINZ PL6
</p>
<p>
JR PLIA
</p>
<p>
EI srestore keyboard interrupt
RET sand return to BASIC
</p>
<p>
PUSH HL ;preserve registers
PUSH BC
</p>
<p>
LDLA
</p>
<p>
CALL Byt Out
</p>
<p>
POP BC ;recover registers
POP HL
</p>
<p>
RET
</p>
<p>
;Output a byte from the L register
</p>
<p>
XOR A sset up for a start bit
CALL SndBit
</p>
<p>
LD B 8
</p>
<p>
PUSH, BC
</p>
<p>
SRL L ssend 8 bits of data
</p>
<p>
36
</p>
<p>
4
&lsquo;
&lsquo;
</p>
<?php columnEnd(1); ?>
