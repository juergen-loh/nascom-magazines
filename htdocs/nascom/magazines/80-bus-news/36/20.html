<?php columnStart(1); ?>
<p>
A0DO
AOD4
AODS
AODC
AODD
AQDF
AQEL
AQE3
AQE7
AOEB
AOEF
AOF3
</p>
<p>
AOF6
AOFA
AOFE
AlOL
</p>
<p>
A103
A105
A106
A108
</p>
<p>
A109
Al10C
</p>
<p>
A10E
AlLO
</p>
<p>
Al12
All3
AlL5S
All16
ALL8
</p>
<p>
AlL9
ALIB
</p>
<p>
AllD
ALLE
A120
AL21
A122
A123
</p>
<p>
AlL25
Al27
</p>
<p>
A129
</p>
<p>
Al2c
Al2E
</p>
<p>
A130
</p>
<p>
27207768
656E2072
65616479
00
</p>
<p>
DF 7B
FESO
20FA
</p>
<p>
EF ODOD50
726F 6772
616D6D69
6E67 2E 2E
2E0D00
</p>
<p>
DD2A3A43
EDSB3EA3
244443
OE 28
</p>
<p>
ED6L
oc
ED6S
oD
</p>
<p>
DD7EOO
D320
</p>
<p>
3E05
D32C
</p>
<p>
23
DD23
13
7A
B3
20DE
</p>
<p>
3E4F
D32F
</p>
<p>
3448A3
</p>
<p>
FE32
2043
</p>
<p>
EFOD4550
</p>
<p>
CARYON PRS \ DB NL,"Switch to PROGRAM and press &ldquo;P&rdquo; when ready",0
</p>
<p>
WAIT2
</p>
<p>
PROGR2
</p>
<p>
LOOPX
</p>
<p>
DELAY
</p>
<p>
SCAL BLINK
ce No
JR NZ,WAIT2
</p>
<p>
PRS \ DB NL,NL,"Programming...",NL,O
sInitialise registers
</p>
<p>
LD LX, (RAMSTA)
</p>
<p>
LD DE, (RAMLEN)
</p>
<p>
LD HL, (ROMSTA)
</p>
<p>
LD C,MSBADD
</p>
<p>
;Output address
</p>
<p>
OUT (C),H
</p>
<p>
INC c
</p>
<p>
OUT (C),L
</p>
<p>
DEC C
</p>
<p>
;Output data
</p>
<p>
LD A,(1X+0)
</p>
<p>
OUT (DATA_D),A
</p>
<p>
,
</p>
<p>
sKeep OE high (inactive)
</p>
<p>
;Set PGM high (active), and PGM low (active)
LD A,OLIB
</p>
<p>
OuT (CONT_D),A
</p>
<p>
;50ms delay
</p>
<p>
PUSH BC
</p>
<p>
LD B,10
</p>
<p>
RDEL
</p>
<p>
DINZ DELAY
</p>
<p>
POP BC
</p>
<p>
,
</p>
<p>
sKeep OE high (inactive)
;Set PGM low (inactive) and PGM high (inactive)
LD A,101B
</p>
<p>
OUT (CONT_D),A
;Do next byte
INC HL
</p>
<p>
INC 1X
</p>
<p>
INC DE
</p>
<p>
LD A,D
</p>
<p>
OR E
</p>
<p>
JR NZ, LOOPX
;When finished,
;verify correct programming
;Set DATA port to INPUT
LD A, 4FH
</p>
<p>
OUT (DATA C),A
</p>
<p>
;Check if 2532 EPROM
</p>
<p>
LD A,(ROMTYP)
</p>
<p>
CP 32H
</p>
<p>
JR NZ, RESTOF
</p>
<p>
;1f it is, print message
sand wait for keypress
</p>
<p>
;Change to 20 for 4MHz
</p>
<p>
sif not finished
</p>
<p>
sJump if not 2532
</p>
<p>
A134
A138
A13C
A140
Al44
A148
Al14c
A150
A154
A158
A15C
A160
Al64
Al68
A16C
Al6D
Al6F
AIT7L
</p>
<p>
A173
A177
Al7B
ALTE
</p>
<p>
Al80
A182
</p>
<p>
A185
A188
</p>
<p>
ALBA
A18E
A192
A196
ALIA
ALIE
AlA2
AlA4
AlA7
</p>
<p>
A1A9
AIAB
AAD
AIAF
</p>
<p>
AlBL
A1B2
AlB4
AlB5
A1B6
AIB7
</p>
<p>
A1B9
AIBB
ALBC
ABE
A1C2
A1lCc6
AICA
A1CE
</p>
<p>
524F4D20
69732061
20323533
32202D20
0D537769
74636820
746F 2052
45414420
616E6420
70726573
73202743
27207768
656E 2072
65616479
00
</p>
<p>
DF7B
FE43
20FA
</p>
<p>
DD2A3AA3
ED5B3EA3
244443
0600
</p>
<p>
0E28
CD19A3
</p>
<p>
DDBEOO
281F
</p>
<p>
EF50726F
6772616D
6D696E67
20666169
60656420
61742000
DF 66
EFODOO
O6OFF
</p>
<p>
DF62
3004
FE 1B
2808
</p>
<p>
23
DD23
13
7A
B3
20C7
</p>
<p>
3EFF
</p>
<p>
BS
</p>
<p>
202F
EFOD5072
6P677261
6D6D696E
67206661
69606564
</p>
<p>
WAITS
</p>
<p>
RESTOF
</p>
<p>
LOO PZ
</p>
<p>
NEXTI
</p>
<p>
NEXT 2
</p>
<p>
ESCAP2
</p>
<p>
PRS \ DB NL,"EPROM is a 2532 = &ldquo;,NL,"Switch |
</p>
<p>
SCAL BLINK | to READ and press &ldquo;C&rdquo; when ready",0
</p>
<p>
cP Not
</p>
<p>
JR NZ,WAITS
sInitialise registers
LD IX, (RAMSTA)
</p>
<p>
LD DE, (RAMLEN)
</p>
<p>
LD HL, (ROMSTA)
</p>
<p>
LD B,0
</p>
<p>
;Read in byte
</p>
<p>
LD C,MSBADD
</p>
<p>
CALL RDBYTE
</p>
<p>
;Verify byte
</p>
<p>
CP (1X+0)
</p>
<p>
JR Z,NEXTL
</p>
<p>
;Otherwise print message
</p>
<p>
;Clear not-programmed flag
</p>
<p>
sIf OK
</p>
<p>
PRS \ DB &ldquo;Programming failed at &ldquo;,0
SCAL TBCD3
</p>
<p>
PRS \ DB NL,O
</p>
<p>
LD B,OFFH ;Set failed-flag
s1f ESCAPE pressed then quit
</p>
<p>
SCAL INP
</p>
<p>
JR NC, NEXT2
</p>
<p>
CP ESC
</p>
<p>
JR Z,ESCAP2
</p>
<p>
;Otherwise do next byte
</p>
<p>
INC HL
</p>
<p>
INC IX
</p>
<p>
INC DE
</p>
<p>
LD A,D
</p>
<p>
OR E
</p>
<p>
JR NZ, LOOPZ 3if not finished
;Lf any failures go back to program again
LD A, OFFH
</p>
<p>
cP B
</p>
<p>
JR NZ, PROGOK
</p>
<p>
20
</p>
<?php columnEnd(1); ?>
