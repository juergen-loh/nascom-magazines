<?php columnStart(1); ?>
<p>
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
PRLIN2
DOT
DOT1
CALL PRINT
INC IY
DJNZ PRLIN1
CALL GAP
LD B, 16
LD IY, LINBUF
LD A, (IY)
CP 20H
JP M, DOT
CP 7BH
JP P, DOT
JR DOT1
LD A, &ldquo;.&rdquo;
CALL PRINT
INC IY
DJNZ PRLIN2
LD A, CR
CALL PRINT
LD A, LF
CALL PRINT
RET
;;;;;;;;;;;
;;;;
;
PRINT IT
NEXT CHARACTER
LOOP FOR 16 CHARACTERS
PRINT 4 SPACES
NOW DO 16 ASCII CHARACTERS
START OF BUFFER
GET CHARACTER
IS IT A CONTROL CHAR.?
IF SO, PRINT A DOT
IS IT GREATER THAN z?
IF SO, PRINT A DOT
PRINT IT
NEXT CHARACTER
LOOP UNTIL 16 DONE
PRINT CARRIAGE RETURN
AND LINE FEED
483
486
487
;;;
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
ROUTINE TO O/P CHARACTER TO PRINTER
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
488
489
490
491
491
492
493
PRINT
PR1
PUSH AF
IN A, (HSHAKE)
AND 80H
JR Z, PR1
POP AF
DEFB SCAL, SRLX
RET
;;
;;
SAVE CHARACTER
HANDSHAKE, BIT 7 PORT 0
RECOVER CHARACTER
NAS-SYS SERIAL O/P
494
496
497
;;;
* * * * * * * * * * * * * * * * * * * * * * * * * * * *
SUBROUTINE FOR 4 SPACE GAP
* * * * * * * * * * * * * * * * * * * * * * * * * * * *
498
499
500
501
502
GAP
GAP1
LD B, 4
LD A, 20H
CALL PRINT
DJNZ GAP1
RET
;;;;
NUMBER OF SPACES
SPACE CHARACTER
PRINT
LOOP UNTIL DONE
503
504
505
;;;
******* **** ***** ***** ***** **** ***** ****
PRINT HEX CDE AS TWO ASCII CHARS.
******* **** ***** ***** ***** **** ***** ****
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
PRTHEX
PRTH1
PRTH2
PUSH AF
AND 0F0H
RRCA
RRCA
RRCA
RRCA
CP 0AH
JP P, ADD37A
ADD A, 30H
CALL PRINT
POP AF
AND 0FH
CP 0AH
JP P, ADD37B
ADD A, 30H
CALL PRINT
;;;
;;;;;;;;;;
SAVE CHARACTER
GET TOP 4 BITS
SHIFT TO BOTTOM 4 BITS
IS IT MORE THAN 10
IF SO, JUMP
CONVERT TO ASCII 0 &ndash; 9
PRINT IT
RECOVER CHARACTER
GET BOTTOM 4 BITS
MORE THAN 10?
IF SO, JUMP
CONVERT TO ASCII 0 &ndash; 9
PRINT IT
</p>
<?php columnEnd(1); ?>
