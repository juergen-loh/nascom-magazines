<?php columnStart(1); ?>
<dl>
<dt></dt><dd>
<p>
Write a file to cassette tape preceded by a file label
containing the specified file name. The file label will be
recognised and displayed by the SYS-EX commands &lsquo;q&rsquo;, &lsquo;r&rsquo; and
&lsquo;v&rsquo;.
</p>
<p>
As the command uses the NAS-SYS Write command to write the
file itself, the format is compatible with files written using
the NAS-SYS &rsquo;W&rsquo; command. If required, the NAS-SYS &lsquo;R&rsquo; and &lsquo;V&rsquo;
commands may be used to read and verify files written by the
SYS-EX &lsquo;w&rsquo; command, although the file label will be ignored by
NAS-SYS. The content of memory from address AAAA up to but
not including BBBB, is the file which is written to the
Cassette tape.
</p>
<p>
After entry of the &lsquo;w&rsquo; command, the prompt &lsquo;wName:&rsquo;
appears on the next screen line and the name of the file to be
written is entered on that line. The tape drive LED is then
switched on and after about two seconds (4MHz), the file label
followed by the file itself is sent to the serial output
port for writing to tape. Finally, the tape drive LED is
switched off.
</p>
<p>
The format of the file label is as follows: 3 x D3H, 0
to 42 characters of file name, 1 space (00H if name length
is 42), 00H.
</p>
<p class="noindent">
AAAA &ndash; first memory address to be written to
tape.<br>
BBBB &ndash; one beyond the last memory address to be
written to tape.
</p>
<p>
Many of the comments for the related SYS-EX commands (&lsquoMl&rsquo;,
&lsquo;q&rsquo;, &lsquo;r&rsquo;, &lsquo;s&rsquo;, &lsquo;v&rsquo;) are of use in understanding the operation
and usage of the &lsquo;w&rsquo; command.
</p>
<p>
A file written using the SYS-EX &lsquo;w&rsquo; command will be
recognised in the 8K Basic by both the CLOAD command and the
SYS-EX Basic named file facility. However, the file is
unlikely to be an acceptable Basic program file and problems
could therefore result if it was read into memory during the
execution of Basic.
</p>
</dd>
<dt>
x</dt><dd><br>
<p class="noindent">
Call user routine number 1
</p>
<p>
Calls a user routine whose execution address has been
stored in the NAS-SYS argument ARG8.
</p>
<p>
The execution address may be set either by entering the
appropriate number of arguments (8,9 or 10) on a command line,
or by using the SYS-EX &lsquo;u&rsquo; command. If the execution
address has a value of 0000H, the command is rejected and
an error message is displayed.
</p>
<p>
On entry to the user routine the NAS-SYS stack is in use.
Care should therefore be taken to ensure that: (i) higher
addresses on the stack are not corrupted, and (ii) the
maximum depth of the stack is not exceeded. A return to
SYS-EX may be made by executing a Z80 RET instruction.
If the carry flag is set upon return to SYS-EX, the message
&lsquo;Error&rsquo; is displayed on the screen prior to the acceptance
of further input.
</p>
</dd>
</dl>
<?php columnEnd(1); ?>
