<?php columnStart(1); ?>
<h1 id="article1">
Another Compass Addition
</h1>
<h2>
by Alan Marshall
</h2>
<p>
In volume 3, number 2 of the Nascom Newsletter, I described
the addition of two more commands and two more pseudo ops te the
COMPASS assembler (version 1.3). This article describes the
addition of a further command,
</p>
<p>
As there were only two &lsquo;spare&rsquo; command letters, the BADCHD
facility of COMPASS iS used. This was thoughtfully&rdquo; provided by
Level 9 as a jump at &pound;0F0O for the addition of extra commands,
and the address of this sump is changed to the address of the
new routine.
</p>
<p>
The new routine, the &lsquo;&rsquo;Z&rsquo; command, provides a means of
listing label addresses without having to reassemble the
program. Once a program has been assembled, pressing &lsquo;2&rsquo;
folloned by a Newline will list the labels and their addresses
immediately, the number being displayed at a tine being
controlled by the &lsquo;H&rsquo; command. The command will work before
assembly but rubbish will be displayed.
</p>
<p>
The program as shown below has its origin at COMPASS+&pound;1AS3,
as it is assumed that the previous additions have been
incorporated. If they have not, then the origin ts at
COMPASS+&pound;297E and line 10 will have to be altered accordingly.
</p>
<p>
The COMPASS Assembler iz unusual in that the labels are not
restricted in length, and so the storage of their addresses is
&lsquo;also unusual. The ustal way is to split the symbol area into &amp;
byte blecks, six bytes being for the label and two for its
address. In&rsquo; this instance, the symbol area is split up into four
byte blocks, mith two bytes far the address and the other two
bytes as the address of the label in the source area. As an
example, the label &lsquo;RIN&rsquo; of this program appeared in the symbol
table as:
</p>
<p>
er 40 08 00
</p>
<p>
the first two bytes being the Late) address and the second, the
abject address. A label address of 00 00 indicates the end of
the list and, ac the program outputs the object address first,
itis erased in lines 3&amp; and 37.
</p>
<p>
The following 1isting shows how simple it is to display the
labels once the storage is understood. Lines 5e and 57 put the
command address in the jump table, so a cold start is necessary
for the program to work.
</p>
<?php columnEnd(1); ?>
