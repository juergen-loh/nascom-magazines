<?php columnStart(1); ?>
<p class="indent2">
81 41 42 43 C4 nn
</p>
<p class="indent">
do? Well it will add ABCD to STRDIS, but will also let <span class="uppercase">Control</span>
know that this is the last routine to be called and so <span class="uppercase">Control</span>
will be exited leaving PRDIS to be called&nbsp;&ndash; and then the next
instruction.
</p>
<p>
Routine 2&nbsp;&ndash; This adds the Gth item, in the following list, to
STRDIS leaving HL&rsquo; pointing to one after the last character in
the list. You can see that this breaks down into 3 parts,
</p>
<dl class="indent justify">
<dt>
i)</dt><dd>Move HL&rsquo; to the beginning of the required element of the
list.
</dd>
<dt>
ii)</dt><dd>Add the element to STRDIS. It may be more than one
character.
</dd>
<dt>
iii)</dt><dd>Move HL&rsquo; to one after the end of the list.
</dd>
</dl>
<p>
If you use, as I did, the &lsquo;Bit 7&rsquo; technique for your list, then
part (ii) may just be a call to Routine 1. See how much work you
can save by spending a little time on these routines.
</p>
<p>
Routine 3&nbsp;&ndash; This is exactly the same as Routine 2, only not for
G, but for H&nbsp;&ndash; not the in HL. In fact I will nearly do this one
for you!!. Store G somewhere. Put H in G&rsquo;s place, call Routine
2, replace G. Easy isn&rsquo;t it?
</p>
<p>
When all these routines are done, you will find that most of
the higher ones will call one lower, and so nested subroutines
build up. In fact to single step through the disassembler<?php spChar("zwsp"); ?>is
fascinating as you can watch the stack pointer (SP) drop like a
stone as all the return addresses get pushed on. Then, as it
finishes with each routine the stack pointer slowly grovels it&rsquo;s
may back to where it began. The first few times you match this
your heart will be in your mouth as you wait with bated breath
for the return addresses to be removed, or will it crash? It
still fascinates me.
</p>
<p>
Routine 4&nbsp;&ndash; This routine is really like accessing a two
dimensional string array, and adding the string to STRDIS. There
are six lists of eight elements. Don&rsquo;t worry!! Not more data,
no, these lists were discussed last time. The actual list will
be specified in <span class="uppercase">Control</span>&rsquo;s command, ie as the data bits (3, 4 &amp; 5
&ndash; go back if you have forgotten!). The string to be added to
STRDIS is, in fact the Gth item in the specified list. Easy!!
Now the lists each have a code (for the data bits for <span class="uppercase">Control</span>)
</p>
<table class="indent2 lastcolright">
<tr><td style="padding-right: 2em"><b>Bits</b><br>345</td><td><b>Name</b></td></tr>
<tr><td colspan=2><br></td></tr>
<tr><td>000</td><td>r(G)</td></tr>
<tr><td>001</td><td>ss(G)</td></tr>
<tr><td>010</td><td>dd(G)</td></tr>
<tr><td>011</td><td>n(G)</td></tr>
<tr><td>100</td><td>c(G)</td></tr>
</table>
<?php columnEnd(1); ?>
