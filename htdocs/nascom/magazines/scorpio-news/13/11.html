<?php columnStart(1); ?>
<p>
Disk Formats and CP/M Disk routines &ndash; Part 3 by M.W.T. Waters
Dink Parameter Heedere
&lsquo;The CP/M&nbsp;2.2 DPB
</p>
<p>
A DPM for CP/M&nbsp;2.2 de a table of eight 26 bit words broken up as follows:
</p>
<p>
Deu: HLT; Translate table addres
000 | 6 bytes scratchpad for BDOS use
000
000
DIREUF Addrese of a buffer used
for reading directory information
De Disk Parameter Block Addrer
csv Checksum Vector addre
aly &lsquo;AMiveation Vector address
</p>
<p>
Mote thet CP/M&nbsp;1.4 doesn&rsquo;t use DPH&rsquo;e and that the DPi&rsquo;s for CP/M&nbsp;3 are
longer.
The BIOS has a DPH for each drive supported by the system. When a drive is
</p>
<p>
Logged in, the BIOS fe address of the appropriate DPH to the 300s. The
BOOS then&rsquo; uses the DPH to locace any remaining that te requir
</p>
<p>
The first entry ts the x translate table which the BIOs
will use to convert from log fore accessing the
Giok. Te no sector transla word will cont
Sector translation Le di Leewhere so all that will be
id-at this poine ie tl aly allows for translation of 128 byte
Sectors. If sector translation is required on systems using sector sizes of
more than 126 bytes, HLT must be sat to sero and the BIOS should do the
Eranelation separately. CP/M&nbsp;3 doesn&rsquo;t suffer from chis iimitation as all disk
transfers and sector eranslation are done in terms of physical disk sectors.
</p>
<p>
eved for use by the BDOS as workspace. Their
</p>
<p>
The next 6 bytes are x
Anieial value Le immaterial.
</p>
<p>
DIRBUF de the addr
</p>
<p>
of a buffer used by the BDOS and BIOS when &copy;
directory information. This buffer Le one physical sector lor
oe
</p>
<p>
&ldquo;(S12 Bye
</p>
<p>
[af DDS, QbDS and QOSS formats, 128 bytes for SDDS format) and may De shared
by all drives in the system. CP/M&nbsp;1.4 Le different in that it uses the default
buffer at address 80m for this purpose. CP/M&nbsp;3 buffers the directory records
</p>
<p>
differently end consequently CP/M&nbsp;3 Deus do not contain this field.
</p>
<p>
Ae the address of # Disk Parameter Block for the drive concerned. A
pp ts required for each disk format handled. DPH&rsquo;s for drives using
fe disk format may all address the some DPB, The DP is explained in full
</p>
<p>
The Checkeum Vector
</p>
<p>
CSV de the address of # table that CP/M uses to check whether a disk has
been changed. The table ig used to store @ checksum byte thar uniquely
Identifies a directory 8 bytes containing 4 directory entries). A
good dafinivion of @ cha in this case, a ingle byte which Ls derived
From a block of data and vhove value ig unique to that block. As fax as
concerned, a block is 4 directory entedes totalling 128 byter (is, one
record) and the checksun byte 1a obtained by adding together all of the byte
the record, &lsquo;ignoring overflow, &lsquo;to produce a total, &lsquo;This total, and the tote
for the ining directory records are stored in a part of the BIOS known a
the eh vector and its address te given ex CSVin the DPS. There
checksum vector for auch detve supported by the system. The Longeh of
vector depends upon the number of dicectory entries. Since the checkvum applies
</p>
<?php columnEnd(1); ?>
