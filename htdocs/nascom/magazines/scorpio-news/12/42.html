<?php columnStart(1); ?>
<p>
A.quick tap on the calculator keyboard will have tol you that,
dublock tise and @/81t Girectory encrige Wilt allch &raquo; mex
Feferenced by a directory entry. This implies ceorrect:
dleectory entcy will be tequiced to hole che block wombare for larger &pound;11
CP/M automaticaly takes care of this problem for us. When writing to disk,
2 directory entry ie filled, CP/M closes ie (by writing it to disk) and opens
fnew one. it shovld be soted that each time CP/M hee read or written all of the
Blocks allocated by a vingle directory entry, it has to read the next entry
from, or write the next entry to disk) Logically, ie would appear that to
improve the performance of the disk cyatem (Le speed up accese), the Block
Zize should be as Large as possible so that CP/M would need to access the
Givectory track of the disk less often (aince extra tine {a needed to move the
disk drive head from where it Le now to the directory rrack and beck again). Tt
would also appear that with &laquo; 16K block size and 8 tit directory eatries, CP/M
Would Gnly have te access the directory track once for every 255K of a file tha
Te is reading or writing However, saybe due to &laquo; hangover from CP/M 2.4 (which
alvaye held 16Xs worth of Block Laformation per directory entry), OP/H 2.2 and
CP/M Pius STILL access the direccory track every 16K.
</p>
<p>
If ve return briefly to the number of blocks reserved for directory entries
can see that we must have enough to allow eccess to the available disk space.
With the Gemint QDps format, each dis Bince 8 bit
entries are used vith # 4k block size fnomber of directory entri
Fequired to access the 196 data blocks on d bets, However, if we wes
toltake the average eieed file to be about OK then to fill # disk with them
Shall need at least 98 d/rectory entries In practice, Oemini chose 1
Gitectory entries which, while entirely adequate for most purposes, try fill
a disk wich aX files or programe. when al tries ha
Used, there 18 still 272K of free his Lean
extreme exanple and will occur very &pound;1 y
</p>
<p>
case it will probably oceur dally ae the average dbasell -CMD file
ina 4K block)
</p>
<p>
The choices, then, facing a
Compromise of ditk size, aumber of directory entri
Gemini had uted a smaller block size for their QDDS format (2K for
CPIM 22 (or CP/M 3) would have used 16 bit entries in the directory.
Consequently, four times #8 many directory entries would have been required.
Way four?) Each directory entry would refer to 2 blocks &ndash; hence twice as many
divectory entries vould be required to hold the block numbers for the same sized
file BUT each block number would now occupy twice we much room in the directory
entry so double the number of directory entries again Similarly, the BDOS
Would &lsquo;have to access the directory track four times as often with &amp;
Corresponding reduction im disk performance.
</p>
<p>
A further complication that pi
disks is due to the vay CP/M feself works
</p>
<p>
vente the use of # 1K block size with Largs
ev&rsquo; have e quick history Leeson
</p>
<p>
CP/M 1.6 ees single density disks (although some micro manufacturers have aude
it work with double density) with a fixed 1k block size and 8 bit directory
entries, &ldquo;Each directory entry, therefore. refers to isk (which we all recognise
ae an extent), CP/M 14 alious @ file/<?php spChar("zwsp"); ?>disk to contain a maximum of 16 extents
humbered 0-15, hence a maximum file/<?php spChar("zwsp"); ?>diax size of 256K (16 x 16K). A hangover
from CP/M 1.4 is that each directory entey HUST be able to control at least one
extent. If we axe uaing 26 bit directory entries, each block must De at least
2k Long since the directory can only hold&rsquo; @ block numbers. This applies equally
to CP/M 22 and CPIM 3
</p>
<p>
We have already seen thet the directory occupies at least one block in the data
cea of the disk Under CEM, che ditectory blocks are always the first ones in
the daca area and it follows that block 0 will alwaye con
</p>
<p>
information. this being the cage. at no time will CP/M aver n
Block 0 toa file For the: ; terae in the directory
</p>
<p>
to signify that no further blocks have been allocated to a File.
</p>
<p>
In directory
to allocate
ry may be used
</p>
<?php columnEnd(1); ?>
