<?php columnStart(1); ?>
<p>
Disk Formats and CP/M Disk routines &ndash; Part 2 by M.W.T. Waters
</p>
<p>
Part 2.
</p>
<p>
Pile sizes, disk sizes and directories
</p>
<p>
Having well and truly taken a disk to pieces in Scorpio News Vi I1, we can at
Inge return to CP/M and the questions waked at the beginning of the &lsquo;firet part
mmber what they were?)
</p>
<p>
of this article. (can anyone
</p>
<p>
Minimum file size on disk {s determined by the block size (referred to by
</p>
<p>
BLS). cP/H on dik as one of more blocks of
</p>
<p>
e128 CP/M records (128
</p>
<p>
ay be 1K, 2K, 4K, 8K oF 16K
</p>
<p>
hen Seciding upon
</p>
<p>
four commoniy used Gemini
a ik block size, the DDDS format
(QDs for) &lsquo;uk block siz
</p>
<p>
Mlccation unite since disk space in allocated to
</p>
<p>
Dlock sige while the QDDs
referred to
</p>
<p>
Hes as one of more blocks
</p>
<p>
The minimum size of &laquo; CP/M file is one block. If you imagine that you wish to
Save a short utility program of, say, 128 byes co disk, that program will
Appear to be JK long on # system with a 1K block size or 16K Long with &laquo; 16K
bivck size one system with &laquo; 16K block size, there would de 16256 bytes of
disk apace wacted after the file vas written to disk Why then do
Banufacturers, auch ae Gemini, use larger block sizes? At first sight, it would
Spear that a 2K block ede ie the Dest choice all round. As we shall see
Inter, the problem of which block size to use isn&rsquo;t quite that simple othervise
all&rsquo;manufacturere would have used 1K blocke (wouldn&rsquo;t they?)
</p>
<p>
hat then, determines the maximum tite of &laquo; fle or disk? To quote Digital
of 23eKbytes.&rdquo; The
</p>
<p>
sey but the process
&lsquo;few computer
</p>
<p>
eeful of directory
anufacturers appear to have made double density CP/M 1.4 ey
</p>
<p>
vam disk size and file The reason for
wximua of 65536 records of 128 byte: weitten to @
yximum file size is determined by the maxiaum value for the
&lsquo;from 0 &pound;0
</p>
<p>
P/M 2.2 alloy
this fa that e
Sisk or file The
fandom record field of # CPIM 2.2 file conveal block which may ren
</p>
<p>
65535,
</p>
<p>
Under CP/M 3 (CP/M Plus), the maximum disk size allowed is Si2Mbytes made up of
a maximum of 92768 blocks. This of course assumee # 16K block #1!
</p>
<p>
block sizes reduce the maximum disk size accordingly so that with &laquo; 1K Block
size, the theoretical maxiaum disk site 4e 32Mbytee. In practice, the maximum
number of 1K blocks under CP/M 22 or CP/M 3 is 256. This is to provide
Compatibility with CP/M it disks as we shall see Later. The maximum file size
silowed by Ch/M 3 Ls 32Mbytes and is deterained again by the maximum value for
the random record field of the CP/M 3 file control block which may
</p>
<p>
to. 262143 giving 262148 records of 128 by:
higher figure, the lower 2 bite of the B2 byt
anid bit random record number:
</p>
<p>
AL this point, ve need to see how
For those familiar with DU COM, this aay
this section too quickly as &laquo; couple of surpri
</p>
<p>
sctory information is stored on
to be revieion bat don&rsquo;t skip
imay be in store for you.
</p>
<p>
low.
</p>
<p>
A CPIM 2.2 directory entry on disk looks something Like the example given
&lsquo;The format used co show the entry is &ldquo;borrowed&rdquo; from DU.COM.
</p>
<p>
ESTPILEGOM..
</p>
<p>
00544533 suaeuouc 4543440 00000001 +.
20000000 60000000 00000000 00000000
</p>
<?php columnEnd(1); ?>
